<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Shopping site: Shop Online for Mobiles, Watches, Shoes and More - ANAA</title>

    <!--css file-->
    <link rel="stylesheet" href="style.css" />

    <!--font awesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>

<body>
    <header class="header">
        <div class="container container-header">
            <div class="logo-container border-white">
                <div class="logo">
                    <a href="index.html">
                        <img src="images/logo3-removebg-preview.png" alt="">
                    </a>
                </div>
            </div>

            <div class="search-container">
                <input type="text" class="search-input" />
                <div class="search-icon">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </div>

            </div>

            <div class="language-container border-white">
                <p>English</p>
            </div>

            <div class="login-container border-white">
                <p>Hello,<span class="success-sign">sign in</span></p>

            </div>

            <div class="cart-button border-white">
                <i class="fa-solid fa-cart-shopping"></i>
                <a href="cart.html">Cart</a>
            </div>
        </div>
    </header>

    <!--navigation-->
    <nav class="nav">
        <div class="container container-nav">
            <ul class="list-container">
                <li class="border-white" id="open-nav-sidebar">
                    <span class="open-nav-slider">
                        <i class="fa-solid fa-bars"></i>
                    </span>
                </li>
                <li class="border-white listNav" data-value="smartphones">Smartphones</li>
                <li class="border-white listNav" data-value="sunglasses">Sunglasses</li>
                <li class="border-white listNav" data-value="womens-watches">Watches</li>
                <li class="border-white listNav" data-value="womens-dresses">Womens Dresses</li>
                <li class="border-white listNav" data-value="mens-shirts">Mens Shirts</li>
                <li class="border-white listNav" data-value="home-decoration">Home Decoration</li>
                <li class="border-white listNav" data-value="fragrances">Fragrances</li>
                <li class="border-white listNav" data-value="groceries">Groceries</li>
                <li class="border-white listNav" data-value="furniture">Furniture</li>
                <li class="border-white listNav" data-value="skincare">Skincare</li>
                <li class="border-white listNav" data-value="laptops">Laptops</li>
                <li class="border-white listNav" data-value="mens-shoes">Mens Shoes</li>



            </ul>

        </div>
    </nav>

    <!--sidebar navigation-->
    <div class="sidebar" id="sidebar-id">
        <div class="sidebar-left-part">
            <div class="sidebar-top">
                <i class="fa-solid fa-circle-user"></i>
                <h2>Hello, <span class="success-sign">sign in</span></h2>
            </div>
            <div class="sidebar-wrap">
                <div class="sidebar-item">
                    <h2>Shop By Category</h2>
                    <p class="side" data-value="smartphones">Smartphones</p>
                    <p class="side" data-value="laptops"> Laptops</p>
                    <p class="side" data-value="mens-watches">Watches</p>
                </div>
                <div class="sidebar-item">
                    <h2>Help</h2>
                    <p><a href="profile.html">Your profile</a></p>
                    <p id="sing-out">sign out</p>
                </div>
            </div>>
        </div>
        <button id="sidebar-close">
            <i class="fa-solid fa-xmark"></i>
        </button>
    </div>




    <!--image slider -->
    <section>
        <div class="image-container">
            <div class="images">
                <div class="image-item">
                    <img name="slide">
                </div>
            </div>
        </div>
    </section>


    <!--product container card-->
    <main class="main">
        <div class="card-product-container container productBackgraound" id="SamProduct">

        </div>
    </main>

    <footer>
        <a href="#" class="footer-title">
            Back to top
        </a>
        <div class="footer-items">
            <a href="index.html">
                <img src="images/logo3-removebg-preview.png" alt="">
            </a>
            <ul>
                <h2>Get to Know Us</h2>
                <li>About us</li>
                <li>Careers</li>
                <li>Press Release</li>
                <li>ANAA Science</li>
            </ul>
            <ul>
                
                <h2>Connect with Us</h2>
                <li>Facebook</li>
                <li>Twitter</li>
                <li>Instagram</li>
            </ul>
            <ul>
                <h2>Make Money with Us</h2>
                <li>Sell on ANAA</li>
                <li>Sell under ANAA Accelerator</li>
                <li>Protect and Build Your Brand</li>
                <li>ANAA Global Selling</li>
                <li>Become an Affiliate</li>
                <li>Fulfillment by ANAA</li>
                <li>Advertise Your Products</li>
                <li>ANAA Pay on Merchants</li>
            </ul>
            <ul>
                <h2>Let Us Help You</h2>
                <li>Your Account</li>
                <li>Return Centre</li>
                <li>100% Purchase Protection</li>
                <li>ANAA App Download</li>
                <li>Help</li>
            </ul>
        </div>
        <div class="footer-items" style="color:white; padding:15px 0"> &copy;2023-2023, ANAA.com</div>
    </footer>

    <script src="javascript.js"></script>
    <script>

        let SamProduct = document.querySelector("#SamProduct")
        let listContainer = document.querySelector(".list-container")
        let SideContainer = document.querySelector(".sidebar-item")
        let successSign = document.getElementsByClassName("success-sign")[0]
        let successSignSide = document.getElementsByClassName("success-sign")[1]
        let singOut = document.getElementById("sing-out")

        xhr = new XMLHttpRequest()

        xhr.open("get", "product.json")

        xhr.send()
        let data
        xhr.addEventListener("load", function () {
            if (xhr.status == 200) {
                data = JSON.parse(xhr.response)
            }
        })

        successSign.addEventListener("click", function () {
            if (successSign.innerHTML == "sign in") {
                window.location.href = "sign in.html"
                singOut.innerHTML = "sign in"

            } else {
                window.location.href = "profile.html"
                singOut.innerHTML = "sign out"
            }

        })

        window.addEventListener("load", function () {



            successSign.innerHTML = `${localStorage.getItem("currentUser")}`
            successSignSide.innerHTML = `${localStorage.getItem("currentUser")}`

            if (successSign.innerHTML == "sign in") {
                singOut.innerHTML = "sign in"

            } else {
                singOut.innerHTML = "sign out"

            }

            /////////////////////   /////////////////////////
            singOut.addEventListener("click", function () {
                if (successSign.innerHTML == "sign in") {
                    window.location.href = "sign in.html"

                } else {
                    window.location.href = "product.html"
                    localStorage.setItem("currentUser", "sign in")

                }
            })



            let productCategory = localStorage.getItem("productCategory")
            for (let product of data) {

                if (product.category == productCategory) {
                    SamProduct.innerHTML += `<div class="card-product one-product" id=${product.id}>
                        <h2>${product.title}</h2>
                        <div class="product-data">
                            <div class="product-img">
                                <img
                                    src=${product.images[0]} />
                            </div>
                            <p class="product-description">
                            ${product.description}
                            </p>
                            <p class="product-rating"><span>Rating: </span>${product.rating}</p>
                            <span class="product-price"><span>Price: </span>${product.price} $</span>
                        </div>
                        <button class="add-btn">Add To Cart</button>
                    </div>`
                }
                else if (productCategory == "top rated" && product.rating >= 4.7) {
                    SamProduct.innerHTML += `<div class="card-product one-product" id=${product.id}>
                        <h2>${product.title}</h2>
                        <div class="product-data">
                            <div class="product-img">
                                <img
                                    src=${product.images[0]} />
                            </div>
                            <p class="product-description">
                            ${product.description}
                            </p>
                            <p class="product-rating"><span>Rating: </span>${product.rating}</p>
                            <span class="product-price"><span>Price: </span>${product.price} $</span>
                        </div>
                        <button class="add-btn">Add To Cart</button>
                    </div>`
                }

            }

            //Send Product ID to LocalStorage

            const addToCartBtn = [...document.getElementsByClassName('add-btn')];
            addToCartBtn.forEach(btn => btn.addEventListener("click", function (event) {
                event.target.textContent = "Added";
                const productCardID = event.target.parentElement.id;
                const storedProductIDs = JSON.parse(localStorage.getItem("productCardIDs")) || [];
                // Add the new product ID to the array
                const currentUserr = localStorage.getItem('currentUser');
                storedProductIDs.push({ currentuser: currentUserr, productID: productCardID });
                console.log(storedProductIDs)
                // Save the updated array back to local storage
                localStorage.setItem("productCardIDs", JSON.stringify(storedProductIDs));

            }))


        })


        //when you choose another category in the same page 

        listContainer.addEventListener("click", function (eve) {
            if (eve.target.classList.contains("listNav")) {
                for (let product of data) {
                    if (product.category == eve.target.dataset.value) {
                        localStorage.setItem("productCategory", product.category)
                        window.location.reload()
                    }
                }
            }
        })

        SideContainer.addEventListener("click", function (eve) {
            if (eve.target.classList.contains("side")) {
                for (let product of data) {
                    if (product.category == eve.target.dataset.value) {
                        localStorage.setItem("productCategory", eve.target.dataset.value)
                        window.location.href = "product.html"
                    }
                }
            }
        })

        /// when you click on see more button in top rated

    </script>
</body>

</html>